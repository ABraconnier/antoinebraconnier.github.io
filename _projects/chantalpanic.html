---
short_name: chantalpanic
name: Chantal Panic!
filepath: chantalpanic
description: This is a game made for my nephews, in honor of my guinea pig named Chantal.
subdescription: In this game, the user needs to  avoid the cages, the two evil twins and collect carrots.
label: pico-8
layout: pico-8
---
<script>
var pico8_gpio = new Array(128);
let bestScoreName = "{{ site.data.best_scores.chantalpanic.name }}";
let bestScoreAmount = "{{ site.data.best_scores.chantalpanic.score }}";

async function submitScore(score, playerName) {
  try {
    const response = await fetch('https://score-updater.ant-braconnier.workers.dev', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        score: score,
        player: playerName
      })
    });

    const result = await response.json();

    if (result.success) {
      console.log('Score submitted successfully!');
      alert('Bravo! ðŸŽ‰');
    } else {
      console.error('Error:', result.error);
    }
  } catch (error) {
    console.error('Failed to submit score:', error);
  }
}

pico8_gpio[0] = bestScoreName.charCodeAt(0);
pico8_gpio[1] = bestScoreName.charCodeAt(1);
pico8_gpio[2] = bestScoreName.charCodeAt(2);
pico8_gpio[3] = bestScoreAmount;

setInterval(() => {
 if (pico8_gpio[3] != bestScoreAmount) {
  submitScore(pico8_gpio[3], String.fromCharCode(pico8_gpio[0], pico8_gpio[1], pico8_gpio[2]));
}
}, 1000);
</script>
